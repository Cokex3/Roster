define(["../core"],function(e){"use strict";var t=function(n,i,r,s,o,a,l){var u=0,c=n.length,f=null==r;if("object"===e.type(r)){o=!0;for(u in r)t(n,i,u,r[u],!0,a,l)}else if(void 0!==s&&(o=!0,e.isFunction(s)||(l=!0),f&&(l?(i.call(n,s),i=null):(f=i,i=function(t,n,i){return f.call(e(t),i)})),i))for(;c>u;u++)i(n[u],r,l?s:s.call(n[u],u,i(n[u],r)));return o?n:f?i.call(n):c?i(n[0],r):a};return t});