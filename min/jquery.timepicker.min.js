!function(e){"object"==typeof exports&&exports&&"object"==typeof module&&module&&module.exports===exports?e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function s(e){var t=e[0];return t.offsetWidth>0&&t.offsetHeight>0}function o(t){if(t.minTime&&(t.minTime=E(t.minTime)),t.maxTime&&(t.maxTime=E(t.maxTime)),t.durationTime&&"function"!=typeof t.durationTime&&(t.durationTime=E(t.durationTime)),"now"==t.scrollDefault)t.scrollDefault=function(){return t.roundingFunction(E(new Date),t)};else if(t.scrollDefault&&"function"!=typeof t.scrollDefault){var n=t.scrollDefault;t.scrollDefault=function(){return t.roundingFunction(E(n),t)}}else t.minTime&&(t.scrollDefault=function(){return t.roundingFunction(t.minTime,t)});if("string"===e.type(t.timeFormat)&&t.timeFormat.match(/[gh]/)&&(t._twelveHourTime=!0),t.showOnFocus===!1&&-1!=t.showOn.indexOf("focus")&&t.showOn.splice(t.showOn.indexOf("focus"),1),t.disableTimeRanges.length>0){for(var i in t.disableTimeRanges)t.disableTimeRanges[i]=[E(t.disableTimeRanges[i][0]),E(t.disableTimeRanges[i][1])];t.disableTimeRanges=t.disableTimeRanges.sort(function(e,t){return e[0]-t[0]});for(var i=t.disableTimeRanges.length-1;i>0;i--)t.disableTimeRanges[i][0]<=t.disableTimeRanges[i-1][1]&&(t.disableTimeRanges[i-1]=[Math.min(t.disableTimeRanges[i][0],t.disableTimeRanges[i-1][0]),Math.max(t.disableTimeRanges[i][1],t.disableTimeRanges[i-1][1])],t.disableTimeRanges.splice(i,1))}return t}function a(n){var i=n.data("timepicker-settings"),s=n.data("timepicker-list");if(s&&s.length&&(s.remove(),n.data("timepicker-list",!1)),i.useSelect){s=e("<select />",{"class":"ui-timepicker-select"});var o=s}else{s=e("<ul />",{"class":"ui-timepicker-list"});var o=e("<div />",{"class":"ui-timepicker-wrapper",tabindex:-1});o.css({display:"none",position:"absolute"}).append(s)}if(i.noneOption)if(i.noneOption===!0&&(i.noneOption=i.useSelect?"Time...":"None"),e.isArray(i.noneOption)){for(var a in i.noneOption)if(parseInt(a,10)==a){var c=l(i.noneOption[a],i.useSelect);s.append(c)}}else{var c=l(i.noneOption,i.useSelect);s.append(c)}if(i.className&&o.addClass(i.className),(null!==i.minTime||null!==i.durationTime)&&i.showDuration){"function"==typeof i.step?"function":i.step;o.addClass("ui-timepicker-with-duration"),o.addClass("ui-timepicker-step-"+i.step)}var h=i.minTime;"function"==typeof i.durationTime?h=E(i.durationTime()):null!==i.durationTime&&(h=i.durationTime);var m=null!==i.minTime?i.minTime:0,v=null!==i.maxTime?i.maxTime:m+t-1;m>v&&(v+=t),v===t-1&&"string"===e.type(i.timeFormat)&&i.show2400&&(v=t);var y=i.disableTimeRanges,_=0,x=y.length,S=i.step;"function"!=typeof S&&(S=function(){return i.step});for(var a=m,L=0;v>=a;L++,a+=60*S(L)){var k=a,A=w(k,i);if(i.useSelect){var N=e("<option />",{value:A});N.text(A)}else{var N=e("<li />");N.addClass(t/2>k%t?"ui-timepicker-am":"ui-timepicker-pm"),N.data("time",T(k,i)),N.text(A)}if((null!==i.minTime||null!==i.durationTime)&&i.showDuration){var D=C(a-h,i.step);if(i.useSelect)N.text(N.text()+" ("+D+")");else{var I=e("<span />",{"class":"ui-timepicker-duration"});I.text(" ("+D+")"),N.append(I)}}x>_&&(k>=y[_][1]&&(_+=1),y[_]&&k>=y[_][0]&&k<y[_][1]&&(i.useSelect?N.prop("disabled",!0):N.addClass("ui-timepicker-disabled"))),s.append(N)}if(o.data("timepicker-input",n),n.data("timepicker-list",o),i.useSelect)n.val()&&s.val(u(E(n.val()),i)),s.on("focus",function(){e(this).data("timepicker-input").trigger("showTimepicker")}),s.on("blur",function(){e(this).data("timepicker-input").trigger("hideTimepicker")}),s.on("change",function(){g(n,e(this).val(),"select")}),g(n,s.val(),"initial"),n.hide().after(s);else{var R=i.appendTo;"string"==typeof R?R=e(R):"function"==typeof R&&(R=R(n)),R.append(o),p(n,s),s.on("mousedown click","li",function(t){n.off("focus.timepicker"),n.on("focus.timepicker-ie-hack",function(){n.off("focus.timepicker-ie-hack"),n.on("focus.timepicker",r.show)}),f(n)||n[0].focus(),s.find("li").removeClass("ui-timepicker-selected"),e(this).addClass("ui-timepicker-selected"),b(n)&&(n.trigger("hideTimepicker"),s.on("mouseup.timepicker click.timepicker","li",function(e){s.off("mouseup.timepicker click.timepicker"),o.hide()}))})}}function l(t,n){var i,r,s;return"object"==typeof t?(i=t.label,r=t.className,s=t.value):"string"==typeof t?i=t:e.error("Invalid noneOption value"),n?e("<option />",{value:s,"class":r,text:i}):e("<li />",{"class":r,text:i}).data("time",String(s))}function u(e,t){return e=t.roundingFunction(e,t),null!==e?w(e,t):void 0}function c(t){if(t.target!=window){var n=e(t.target);n.closest(".ui-timepicker-input").length||n.closest(".ui-timepicker-wrapper").length||(r.hide(),e(document).unbind(".ui-timepicker"),e(window).unbind(".ui-timepicker"))}}function f(e){var t=e.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&t.disableTouchKeyboard}function d(t,n,i){if(!i&&0!==i)return!1;var r=t.data("timepicker-settings"),s=!1,i=r.roundingFunction(i,r);return n.find("li").each(function(t,n){var r=e(n);if("number"==typeof r.data("time"))return r.data("time")==i?(s=r,!1):void 0}),s}function p(e,t){t.find("li").removeClass("ui-timepicker-selected");var n=e.data("timepicker-settings"),i=E(m(e),n);if(null!==i){var r=d(e,t,i);if(r){var s=r.offset().top-t.offset().top;(s+r.outerHeight()>t.outerHeight()||0>s)&&t.scrollTop(t.scrollTop()+r.position().top-r.outerHeight()),(n.forceRoundTime||r.data("time")===i)&&r.addClass("ui-timepicker-selected")}}}function h(t,n){if("timepicker"!=n){var i=e(this);if(""===this.value)return void g(i,null,n);if(!i.is(":focus")||t&&"change"==t.type){var r=i.data("timepicker-settings"),s=E(this.value,r);if(null===s)return void i.trigger("timeFormatError");var o=!1;if(null!==r.minTime&&null!==r.maxTime&&(s<r.minTime||s>r.maxTime)&&(o=!0),e.each(r.disableTimeRanges,function(){return s>=this[0]&&s<this[1]?(o=!0,!1):void 0}),r.forceRoundTime){var a=r.roundingFunction(s,r);a!=s&&(s=a,n=null)}var l=w(s,r);o?(g(i,l,"error")||t&&"change"==t.type)&&i.trigger("timeRangeError"):g(i,l,n)}}}function m(e){return e.is("input")?e.val():e.data("ui-timepicker-value")}function g(e,t,n){if(e.is("input")){e.val(t);var i=e.data("timepicker-settings");i.useSelect&&"select"!=n&&"initial"!=n&&e.data("timepicker-list").val(u(E(t),i))}return e.data("ui-timepicker-value")!=t?(e.data("ui-timepicker-value",t),"select"==n?e.trigger("selectTime").trigger("changeTime").trigger("change","timepicker"):-1==["error","initial"].indexOf(n)&&e.trigger("changeTime"),!0):(e.trigger("selectTime"),!1)}function v(e){switch(e.keyCode){case 13:case 9:return;default:e.preventDefault()}}function y(t){var n=e(this),i=n.data("timepicker-list");if(!i||!s(i)){if(40!=t.keyCode)return!0;r.show.call(n.get(0)),i=n.data("timepicker-list"),f(n)||n.focus()}switch(t.keyCode){case 13:return b(n)&&(h.call(n.get(0),{type:"change"}),r.hide.apply(this)),t.preventDefault(),!1;case 38:var o=i.find(".ui-timepicker-selected");return o.length?o.is(":first-child")||(o.removeClass("ui-timepicker-selected"),o.prev().addClass("ui-timepicker-selected"),o.prev().position().top<o.outerHeight()&&i.scrollTop(i.scrollTop()-o.outerHeight())):(i.find("li").each(function(t,n){return e(n).position().top>0?(o=e(n),!1):void 0}),o.addClass("ui-timepicker-selected")),!1;case 40:return o=i.find(".ui-timepicker-selected"),0===o.length?(i.find("li").each(function(t,n){return e(n).position().top>0?(o=e(n),!1):void 0}),o.addClass("ui-timepicker-selected")):o.is(":last-child")||(o.removeClass("ui-timepicker-selected"),o.next().addClass("ui-timepicker-selected"),o.next().position().top+2*o.outerHeight()>i.outerHeight()&&i.scrollTop(i.scrollTop()+o.outerHeight())),!1;case 27:i.find("li").removeClass("ui-timepicker-selected"),r.hide();break;case 9:r.hide();break;default:return!0}}function _(t){var n=e(this),i=n.data("timepicker-list"),r=n.data("timepicker-settings");if(!i||!s(i)||r.disableTextInput)return!0;if("paste"===t.type||"cut"===t.type)return void setTimeout(function(){r.typeaheadHighlight?p(n,i):i.hide()},0);switch(t.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:r.typeaheadHighlight?p(n,i):i.hide()}}function b(e){var t=e.data("timepicker-settings"),n=e.data("timepicker-list"),i=null,r=n.find(".ui-timepicker-selected");return r.hasClass("ui-timepicker-disabled")?!1:(r.length&&(i=r.data("time")),null!==i&&("string"!=typeof i&&(i=w(i,t)),g(e,i,"select")),!0)}function C(e,t){e=Math.abs(e);var s,o,i=Math.round(e/60),r=[];return 60>i?r=[i,n.mins]:(s=Math.floor(i/60),o=i%60,30==t&&30==o&&(s+=n.decimal+5),r.push(s),r.push(1==s?n.hr:n.hrs),30!=t&&o&&(r.push(o),r.push(n.mins))),r.join(" ")}function w(i,r){if("number"!=typeof i)return null;var s=parseInt(i%60),o=parseInt(i/60%60),a=parseInt(i/3600%24),l=new Date(1970,0,2,a,o,s,0);if(isNaN(l.getTime()))return null;if("function"===e.type(r.timeFormat))return r.timeFormat(l);for(var c,f,u="",d=0;d<r.timeFormat.length;d++)switch(f=r.timeFormat.charAt(d)){case"a":u+=l.getHours()>11?n.pm:n.am;break;case"A":u+=l.getHours()>11?n.PM:n.AM;break;case"g":c=l.getHours()%12,u+=0===c?"12":c;break;case"G":c=l.getHours(),i===t&&(c=r.show2400?24:0),u+=c;break;case"h":c=l.getHours()%12,0!==c&&10>c&&(c="0"+c),u+=0===c?"12":c;break;case"H":c=l.getHours(),i===t&&(c=r.show2400?24:0),u+=c>9?c:"0"+c;break;case"i":var o=l.getMinutes();u+=o>9?o:"0"+o;break;case"s":s=l.getSeconds(),u+=s>9?s:"0"+s;break;case"\\":d++,u+=r.timeFormat.charAt(d);break;default:u+=f}return u}function E(e,i){if(""===e||null===e)return null;if("object"==typeof e)return 3600*e.getHours()+60*e.getMinutes()+e.getSeconds();if("string"!=typeof e)return e;e=e.toLowerCase().replace(/[\s\.]/g,""),("a"==e.slice(-1)||"p"==e.slice(-1))&&(e+="m");var r="("+n.am.replace(".","")+"|"+n.pm.replace(".","")+"|"+n.AM.replace(".","")+"|"+n.PM.replace(".","")+")?",s=new RegExp("^"+r+"([0-9]?[0-9])\\W?([0-5][0-9])?\\W?([0-5][0-9])?"+r+"$"),o=e.match(s);if(!o)return null;var a=parseInt(1*o[2],10),l=o[1]||o[5],u=a,c=1*o[3]||0,f=1*o[4]||0;if(12>=a&&l){var d=l==n.pm||l==n.PM;u=12==a?d?12:0:a+(d?12:0)}else if(i){var p=3600*a+60*c+f;if(p>=t+(i.show2400?1:0)){if(i.wrapHours===!1)return null;u=a%24}}var h=3600*u+60*c+f;if(12>a&&!l&&i&&i._twelveHourTime&&i.scrollDefault){var m=h-i.scrollDefault();0>m&&m>=t/-2&&(h=(h+t/2)%t)}return h}function T(e,n){return e==t&&n.show2400?e:e%t}var t=86400,n={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},i={appendTo:"body",className:null,closeOnWindowScroll:!1,disableTextInput:!1,disableTimeRanges:[],disableTouchKeyboard:!1,durationTime:null,forceRoundTime:!1,maxTime:null,minTime:null,noneOption:!1,orientation:"l",roundingFunction:function(e,t){if(null===e)return null;if("number"!=typeof t.step)return e;var n=e%(60*t.step),i=t.minTime||0;return n-=i%(60*t.step),n>=30*t.step?e+=60*t.step-n:e-=n,T(e,t)},scrollDefault:null,selectOnBlur:!1,show2400:!1,showDuration:!1,showOn:["click","focus"],showOnFocus:!0,step:30,stopScrollPropagation:!1,timeFormat:"g:ia",typeaheadHighlight:!0,useSelect:!1,wrapHours:!0},r={init:function(t){return this.each(function(){var s=e(this),l=[];for(var u in i)s.data(u)&&(l[u]=s.data(u));var c=e.extend({},i,t,l);if(c.lang&&(n=e.extend(n,c.lang)),c=o(c),s.data("timepicker-settings",c),s.addClass("ui-timepicker-input"),c.useSelect)a(s);else{if(s.prop("autocomplete","off"),c.showOn)for(var f in c.showOn)s.on(c.showOn[f]+".timepicker",r.show);s.on("change.timepicker",h),s.on("keydown.timepicker",y),s.on("keyup.timepicker",_),c.disableTextInput&&s.on("keydown.timepicker",v),s.on("cut.timepicker",_),s.on("paste.timepicker",_),h.call(s.get(0),null,"initial")}})},show:function(t){var n=e(this),i=n.data("timepicker-settings");if(t&&t.preventDefault(),i.useSelect)return void n.data("timepicker-list").focus();f(n)&&n.blur();var o=n.data("timepicker-list");if(!n.prop("readonly")&&(o&&0!==o.length&&"function"!=typeof i.durationTime||(a(n),o=n.data("timepicker-list")),!s(o))){n.data("ui-timepicker-value",n.val()),p(n,o),r.hide(),o.show();var l={};i.orientation.match(/r/)?l.left=n.offset().left+n.outerWidth()-o.outerWidth()+parseInt(o.css("marginLeft").replace("px",""),10):l.left=n.offset().left+parseInt(o.css("marginLeft").replace("px",""),10);var u;u=i.orientation.match(/t/)?"t":i.orientation.match(/b/)?"b":n.offset().top+n.outerHeight(!0)+o.outerHeight()>e(window).height()+e(window).scrollTop()?"t":"b","t"==u?(o.addClass("ui-timepicker-positioned-top"),l.top=n.offset().top-o.outerHeight()+parseInt(o.css("marginTop").replace("px",""),10)):(o.removeClass("ui-timepicker-positioned-top"),l.top=n.offset().top+n.outerHeight()+parseInt(o.css("marginTop").replace("px",""),10)),o.offset(l);var h=o.find(".ui-timepicker-selected");if(!h.length){var g=E(m(n));null!==g?h=d(n,o,g):i.scrollDefault&&(h=d(n,o,i.scrollDefault()))}if((!h.length||h.hasClass("ui-timepicker-disabled"))&&(h=o.find("li:not(.ui-timepicker-disabled):first")),h&&h.length){var v=o.scrollTop()+h.position().top-h.outerHeight();o.scrollTop(v)}else o.scrollTop(0);return i.stopScrollPropagation&&e(document).on("wheel.ui-timepicker",".ui-timepicker-wrapper",function(t){t.preventDefault();var n=e(this).scrollTop();e(this).scrollTop(n+t.originalEvent.deltaY)}),e(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",c),e(window).on("resize.ui-timepicker",c),i.closeOnWindowScroll&&e(document).on("scroll.ui-timepicker",c),n.trigger("showTimepicker"),this}},hide:function(t){var n=e(this),i=n.data("timepicker-settings");return i&&i.useSelect&&n.blur(),e(".ui-timepicker-wrapper").each(function(){var t=e(this);if(s(t)){var n=t.data("timepicker-input"),i=n.data("timepicker-settings");i&&i.selectOnBlur&&b(n),t.hide(),n.trigger("hideTimepicker")}}),this},option:function(t,n){return"string"==typeof t&&"undefined"==typeof n?e(this).data("timepicker-settings")[t]:this.each(function(){var i=e(this),r=i.data("timepicker-settings"),s=i.data("timepicker-list");"object"==typeof t?r=e.extend(r,t):"string"==typeof t&&(r[t]=n),r=o(r),i.data("timepicker-settings",r),h.call(i.get(0),{type:"change"},"initial"),s&&(s.remove(),i.data("timepicker-list",!1)),r.useSelect&&a(i)})},getSecondsFromMidnight:function(){return E(m(this))},getTime:function(e){var t=this,n=m(t);if(!n)return null;var i=E(n);if(null===i)return null;e||(e=new Date);var r=new Date(e);return r.setHours(i/3600),r.setMinutes(i%3600/60),r.setSeconds(i%60),r.setMilliseconds(0),r},isVisible:function(){var e=this,t=e.data("timepicker-list");return!(!t||!s(t))},setTime:function(e){var t=this,n=t.data("timepicker-settings");if(n.forceRoundTime)var i=u(E(e),n);else var i=w(E(e),n);return e&&null===i&&n.noneOption&&(i=e),t.val(i),h.call(t.get(0),{type:"change"},"initial"),t.data("timepicker-list")&&p(t,t.data("timepicker-list")),this},remove:function(){var e=this;if(e.hasClass("ui-timepicker-input")){var t=e.data("timepicker-settings");return e.removeAttr("autocomplete","off"),e.removeClass("ui-timepicker-input"),e.removeData("timepicker-settings"),e.off(".timepicker"),e.data("timepicker-list")&&e.data("timepicker-list").remove(),t.useSelect&&e.show(),e.removeData("timepicker-list"),this}}};e.fn.timepicker=function(t){return this.length?r[t]?this.hasClass("ui-timepicker-input")?r[t].apply(this,Array.prototype.slice.call(arguments,1)):this:"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.timepicker"):r.init.apply(this,arguments):this}});