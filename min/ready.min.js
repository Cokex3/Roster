define(["../core","../var/document","../core/readyException","../deferred"],function(e,t){"use strict";function i(){t.removeEventListener("DOMContentLoaded",i),window.removeEventListener("load",i),e.ready()}var n=e.Deferred();e.fn.ready=function(t){return n.then(t)["catch"](function(t){e.readyException(t)}),this},e.extend({isReady:!1,readyWait:1,ready:function(i){(i===!0?--e.readyWait:e.isReady)||(e.isReady=!0,i!==!0&&--e.readyWait>0||n.resolveWith(t,[e]))}}),e.ready.then=n.then,"complete"===t.readyState||"loading"!==t.readyState&&!t.documentElement.doScroll?window.setTimeout(e.ready):(t.addEventListener("DOMContentLoaded",i),window.addEventListener("load",i))});