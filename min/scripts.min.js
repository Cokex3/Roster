/*!
 * jquery-timepicker v1.11.12 - A jQuery timepicker plugin inspired by Google Calendar. It supports both mouse and keyboard navigation.
 * Copyright (c) 2015 Jon Thornton - http://jonthornton.github.com/jquery-timepicker/
 * License: MIT
 */
!function(e){"object"==typeof exports&&exports&&"object"==typeof module&&module&&module.exports===exports?e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(e){var t=e[0]
return t.offsetWidth>0&&t.offsetHeight>0}function i(t){if(t.minTime&&(t.minTime=k(t.minTime)),t.maxTime&&(t.maxTime=k(t.maxTime)),t.durationTime&&"function"!=typeof t.durationTime&&(t.durationTime=k(t.durationTime)),"now"==t.scrollDefault)t.scrollDefault=function(){return t.roundingFunction(k(new Date),t)}
else if(t.scrollDefault&&"function"!=typeof t.scrollDefault){var i=t.scrollDefault
t.scrollDefault=function(){return t.roundingFunction(k(i),t)}}else t.minTime&&(t.scrollDefault=function(){return t.roundingFunction(t.minTime,t)})
if("string"===e.type(t.timeFormat)&&t.timeFormat.match(/[gh]/)&&(t._twelveHourTime=!0),!1===t.showOnFocus&&-1!=t.showOn.indexOf("focus")&&t.showOn.splice(t.showOn.indexOf("focus"),1),t.disableTimeRanges.length>0){for(var a in t.disableTimeRanges)t.disableTimeRanges[a]=[k(t.disableTimeRanges[a][0]),k(t.disableTimeRanges[a][1])]
t.disableTimeRanges=t.disableTimeRanges.sort(function(e,t){return e[0]-t[0]})
for(var a=t.disableTimeRanges.length-1;a>0;a--)t.disableTimeRanges[a][0]<=t.disableTimeRanges[a-1][1]&&(t.disableTimeRanges[a-1]=[Math.min(t.disableTimeRanges[a][0],t.disableTimeRanges[a-1][0]),Math.max(t.disableTimeRanges[a][1],t.disableTimeRanges[a-1][1])],t.disableTimeRanges.splice(a,1))}return t}function a(t){var i=t.data("timepicker-settings"),a=t.data("timepicker-list")
if(a&&a.length&&(a.remove(),t.data("timepicker-list",!1)),i.useSelect){a=e("<select />",{class:"ui-timepicker-select"})
var s=a}else{a=e("<ul />",{class:"ui-timepicker-list"})
var s=e("<div />",{class:"ui-timepicker-wrapper",tabindex:-1})
s.css({display:"none",position:"absolute"}).append(a)}if(i.noneOption)if(!0===i.noneOption&&(i.noneOption=i.useSelect?"Time...":"None"),e.isArray(i.noneOption)){for(var o in i.noneOption)if(parseInt(o,10)==o){var c=n(i.noneOption[o],i.useSelect)
a.append(c)}}else{var c=n(i.noneOption,i.useSelect)
a.append(c)}if(i.className&&s.addClass(i.className),(null!==i.minTime||null!==i.durationTime)&&i.showDuration){"function"==typeof i.step||i.step
s.addClass("ui-timepicker-with-duration"),s.addClass("ui-timepicker-step-"+i.step)}var m=i.minTime
"function"==typeof i.durationTime?m=k(i.durationTime()):null!==i.durationTime&&(m=i.durationTime)
var p=null!==i.minTime?i.minTime:0,f=null!==i.maxTime?i.maxTime:p+y-1
f<p&&(f+=y),f===y-1&&"string"===e.type(i.timeFormat)&&i.show2400&&(f=y)
var h=i.disableTimeRanges,w=0,$=h.length,C=i.step
"function"!=typeof C&&(C=function(){return i.step})
for(var o=p,_=0;o<=f;_++,o+=60*C(_)){var S=o,R=b(S,i)
if(i.useSelect){var j=e("<option />",{value:R})
j.text(R)}else{var j=e("<li />")
j.addClass(S%y<y/2?"ui-timepicker-am":"ui-timepicker-pm"),j.data("time",T(S,i)),j.text(R)}if((null!==i.minTime||null!==i.durationTime)&&i.showDuration){var H=v(o-m,i.step)
if(i.useSelect)j.text(j.text()+" ("+H+")")
else{var M=e("<span />",{class:"ui-timepicker-duration"})
M.text(" ("+H+")"),j.append(M)}}w<$&&(S>=h[w][1]&&(w+=1),h[w]&&S>=h[w][0]&&S<h[w][1]&&(i.useSelect?j.prop("disabled",!0):j.addClass("ui-timepicker-disabled"))),a.append(j)}if(s.data("timepicker-input",t),t.data("timepicker-list",s),i.useSelect)t.val()&&a.val(r(k(t.val()),i)),a.on("focus",function(){e(this).data("timepicker-input").trigger("showTimepicker")}),a.on("blur",function(){e(this).data("timepicker-input").trigger("hideTimepicker")}),a.on("change",function(){u(t,e(this).val(),"select")}),u(t,a.val(),"initial"),t.hide().after(a)
else{var O=i.appendTo
"string"==typeof O?O=e(O):"function"==typeof O&&(O=O(t)),O.append(s),d(t,a),a.on("mousedown click","li",function(i){t.off("focus.timepicker"),t.on("focus.timepicker-ie-hack",function(){t.off("focus.timepicker-ie-hack"),t.on("focus.timepicker",x.show)}),l(t)||t[0].focus(),a.find("li").removeClass("ui-timepicker-selected"),e(this).addClass("ui-timepicker-selected"),g(t)&&(t.trigger("hideTimepicker"),a.on("mouseup.timepicker click.timepicker","li",function(e){a.off("mouseup.timepicker click.timepicker"),s.hide()}))})}}function n(t,i){var a,n,r
return"object"==typeof t?(a=t.label,n=t.className,r=t.value):"string"==typeof t?a=t:e.error("Invalid noneOption value"),i?e("<option />",{value:r,class:n,text:a}):e("<li />",{class:n,text:a}).data("time",String(r))}function r(e,t){if(null!==(e=t.roundingFunction(e,t)))return b(e,t)}function s(t){if(t.target!=window){var i=e(t.target)
i.closest(".ui-timepicker-input").length||i.closest(".ui-timepicker-wrapper").length||(x.hide(),e(document).unbind(".ui-timepicker"),e(window).unbind(".ui-timepicker"))}}function l(e){var t=e.data("timepicker-settings")
return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&t.disableTouchKeyboard}function o(t,i,a){if(!a&&0!==a)return!1
var n=t.data("timepicker-settings"),r=!1,a=n.roundingFunction(a,n)
return i.find("li").each(function(t,i){var n=e(i)
if("number"==typeof n.data("time"))return n.data("time")==a?(r=n,!1):void 0}),r}function d(e,t){t.find("li").removeClass("ui-timepicker-selected")
var i=e.data("timepicker-settings"),a=k(m(e),i)
if(null!==a){var n=o(e,t,a)
if(n){var r=n.offset().top-t.offset().top;(r+n.outerHeight()>t.outerHeight()||r<0)&&t.scrollTop(t.scrollTop()+n.position().top-n.outerHeight()),(i.forceRoundTime||n.data("time")===a)&&n.addClass("ui-timepicker-selected")}}}function c(t,i){if("timepicker"!=i){var a=e(this)
if(""===this.value)return void u(a,null,i)
if(!a.is(":focus")||t&&"change"==t.type){var n=a.data("timepicker-settings"),r=k(this.value,n)
if(null===r)return void a.trigger("timeFormatError")
var s=!1
if(null!==n.minTime&&null!==n.maxTime&&(r<n.minTime||r>n.maxTime)&&(s=!0),e.each(n.disableTimeRanges,function(){if(r>=this[0]&&r<this[1])return s=!0,!1}),n.forceRoundTime){var l=n.roundingFunction(r,n)
l!=r&&(r=l,i=null)}var o=b(r,n)
s?(u(a,o,"error")||t&&"change"==t.type)&&a.trigger("timeRangeError"):u(a,o,i)}}}function m(e){return e.is("input")?e.val():e.data("ui-timepicker-value")}function u(e,t,i){if(e.is("input")){e.val(t)
var a=e.data("timepicker-settings")
a.useSelect&&"select"!=i&&e.data("timepicker-list").val(r(k(t),a))}return e.data("ui-timepicker-value")!=t?(e.data("ui-timepicker-value",t),"select"==i?e.trigger("selectTime").trigger("changeTime").trigger("change","timepicker"):-1==["error","initial"].indexOf(i)&&e.trigger("changeTime"),!0):(-1==["error","initial"].indexOf(i)&&e.trigger("selectTime"),!1)}function p(e){switch(e.keyCode){case 13:case 9:return
default:e.preventDefault()}}function f(i){var a=e(this),n=a.data("timepicker-list")
if(!n||!t(n)){if(40!=i.keyCode)return!0
x.show.call(a.get(0)),n=a.data("timepicker-list"),l(a)||a.focus()}switch(i.keyCode){case 13:return g(a)&&(c.call(a.get(0),{type:"change"}),x.hide.apply(this)),i.preventDefault(),!1
case 38:var r=n.find(".ui-timepicker-selected")
return r.length?r.is(":first-child")||(r.removeClass("ui-timepicker-selected"),r.prev().addClass("ui-timepicker-selected"),r.prev().position().top<r.outerHeight()&&n.scrollTop(n.scrollTop()-r.outerHeight())):(n.find("li").each(function(t,i){if(e(i).position().top>0)return r=e(i),!1}),r.addClass("ui-timepicker-selected")),!1
case 40:return r=n.find(".ui-timepicker-selected"),0===r.length?(n.find("li").each(function(t,i){if(e(i).position().top>0)return r=e(i),!1}),r.addClass("ui-timepicker-selected")):r.is(":last-child")||(r.removeClass("ui-timepicker-selected"),r.next().addClass("ui-timepicker-selected"),r.next().position().top+2*r.outerHeight()>n.outerHeight()&&n.scrollTop(n.scrollTop()+r.outerHeight())),!1
case 27:n.find("li").removeClass("ui-timepicker-selected"),x.hide()
break
case 9:x.hide()
break
default:return!0}}function h(i){var a=e(this),n=a.data("timepicker-list"),r=a.data("timepicker-settings")
if(!n||!t(n)||r.disableTextInput)return!0
if("paste"===i.type||"cut"===i.type)return void setTimeout(function(){r.typeaheadHighlight?d(a,n):n.hide()},0)
switch(i.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:r.typeaheadHighlight?d(a,n):n.hide()}}function g(e){var t=e.data("timepicker-settings"),i=e.data("timepicker-list"),a=null,n=i.find(".ui-timepicker-selected")
return!n.hasClass("ui-timepicker-disabled")&&(n.length&&(a=n.data("time")),null!==a&&("string"!=typeof a&&(a=b(a,t)),u(e,a,"select")),!0)}function v(e,t){e=Math.abs(e)
var i,a,n=Math.round(e/60),r=[]
return n<60?r=[n,w.mins]:(i=Math.floor(n/60),a=n%60,30==t&&30==a&&(i+=w.decimal+5),r.push(i),r.push(1==i?w.hr:w.hrs),30!=t&&a&&(r.push(a),r.push(w.mins))),r.join(" ")}function b(t,i){if("number"!=typeof t)return null
var a=parseInt(t%60),n=parseInt(t/60%60),r=parseInt(t/3600%24),s=new Date(1970,0,2,r,n,a,0)
if(isNaN(s.getTime()))return null
if("function"===e.type(i.timeFormat))return i.timeFormat(s)
for(var l,o,d="",c=0;c<i.timeFormat.length;c++)switch(o=i.timeFormat.charAt(c)){case"a":d+=s.getHours()>11?w.pm:w.am
break
case"A":d+=s.getHours()>11?w.PM:w.AM
break
case"g":l=s.getHours()%12,d+=0===l?"12":l
break
case"G":l=s.getHours(),t===y&&(l=i.show2400?24:0),d+=l
break
case"h":l=s.getHours()%12,0!==l&&l<10&&(l="0"+l),d+=0===l?"12":l
break
case"H":l=s.getHours(),t===y&&(l=i.show2400?24:0),d+=l>9?l:"0"+l
break
case"i":var n=s.getMinutes()
d+=n>9?n:"0"+n
break
case"s":a=s.getSeconds(),d+=a>9?a:"0"+a
break
case"\\":c++,d+=i.timeFormat.charAt(c)
break
default:d+=o}return d}function k(e,t){if(""===e||null===e)return null
if("object"==typeof e)return 3600*e.getHours()+60*e.getMinutes()+e.getSeconds()
if("string"!=typeof e)return e
e=e.toLowerCase().replace(/[\s\.]/g,""),"a"!=e.slice(-1)&&"p"!=e.slice(-1)||(e+="m")
var i="("+w.am.replace(".","")+"|"+w.pm.replace(".","")+"|"+w.AM.replace(".","")+"|"+w.PM.replace(".","")+")?",a=new RegExp("^"+i+"([0-9]?[0-9])\\W?([0-5][0-9])?\\W?([0-5][0-9])?"+i+"$"),n=e.match(a)
if(!n)return null
var r=parseInt(1*n[2],10),s=n[1]||n[5],l=r,o=1*n[3]||0,d=1*n[4]||0
if(r<=12&&s){var c=s==w.pm||s==w.PM
l=12==r?c?12:0:r+(c?12:0)}else if(t){var m=3600*r+60*o+d
if(m>=y+(t.show2400?1:0)){if(!1===t.wrapHours)return null
l=r%24}}var u=3600*l+60*o+d
if(r<12&&!s&&t&&t._twelveHourTime&&t.scrollDefault){var p=u-t.scrollDefault()
p<0&&p>=y/-2&&(u=(u+y/2)%y)}return u}function T(e,t){return e==y&&t.show2400?e:e%y}var y=86400,w={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},$={appendTo:"body",className:null,closeOnWindowScroll:!1,disableTextInput:!1,disableTimeRanges:[],disableTouchKeyboard:!1,durationTime:null,forceRoundTime:!1,maxTime:null,minTime:null,noneOption:!1,orientation:"l",roundingFunction:function(e,t){if(null===e)return null
if("number"!=typeof t.step)return e
var i=e%(60*t.step)
return i-=(t.minTime||0)%(60*t.step),i>=30*t.step?e+=60*t.step-i:e-=i,T(e,t)},scrollDefault:null,selectOnBlur:!1,show2400:!1,showDuration:!1,showOn:["click","focus"],showOnFocus:!0,step:30,stopScrollPropagation:!1,timeFormat:"g:ia",typeaheadHighlight:!0,useSelect:!1,wrapHours:!0},x={init:function(t){return this.each(function(){var n=e(this),r=[]
for(var s in $)n.data(s)&&(r[s]=n.data(s))
var l=e.extend({},$,t,r)
if(l.lang&&(w=e.extend(w,l.lang)),l=i(l),n.data("timepicker-settings",l),n.addClass("ui-timepicker-input"),l.useSelect)a(n)
else{if(n.prop("autocomplete","off"),l.showOn)for(var o in l.showOn)n.on(l.showOn[o]+".timepicker",x.show)
n.on("change.timepicker",c),n.on("keydown.timepicker",f),n.on("keyup.timepicker",h),l.disableTextInput&&n.on("keydown.timepicker",p),n.on("cut.timepicker",h),n.on("paste.timepicker",h),c.call(n.get(0),null,"initial")}})},show:function(i){var n=e(this),r=n.data("timepicker-settings")
if(i&&i.preventDefault(),r.useSelect)return void n.data("timepicker-list").focus()
l(n)&&n.blur()
var c=n.data("timepicker-list")
if(!n.prop("readonly")&&(c&&0!==c.length&&"function"!=typeof r.durationTime||(a(n),c=n.data("timepicker-list")),!t(c))){n.data("ui-timepicker-value",n.val()),d(n,c),x.hide(),c.show()
var u={}
r.orientation.match(/r/)?u.left=n.offset().left+n.outerWidth()-c.outerWidth()+parseInt(c.css("marginLeft").replace("px",""),10):u.left=n.offset().left+parseInt(c.css("marginLeft").replace("px",""),10)
var p
p=r.orientation.match(/t/)?"t":r.orientation.match(/b/)?"b":n.offset().top+n.outerHeight(!0)+c.outerHeight()>e(window).height()+e(window).scrollTop()?"t":"b","t"==p?(c.addClass("ui-timepicker-positioned-top"),u.top=n.offset().top-c.outerHeight()+parseInt(c.css("marginTop").replace("px",""),10)):(c.removeClass("ui-timepicker-positioned-top"),u.top=n.offset().top+n.outerHeight()+parseInt(c.css("marginTop").replace("px",""),10)),c.offset(u)
var f=c.find(".ui-timepicker-selected")
if(!f.length){var h=k(m(n))
null!==h?f=o(n,c,h):r.scrollDefault&&(f=o(n,c,r.scrollDefault()))}if(f.length&&!f.hasClass("ui-timepicker-disabled")||(f=c.find("li:not(.ui-timepicker-disabled):first")),f&&f.length){var g=c.scrollTop()+f.position().top-f.outerHeight()
c.scrollTop(g)}else c.scrollTop(0)
return r.stopScrollPropagation&&e(document).on("wheel.ui-timepicker",".ui-timepicker-wrapper",function(t){t.preventDefault()
var i=e(this).scrollTop()
e(this).scrollTop(i+t.originalEvent.deltaY)}),e(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",s),e(window).on("resize.ui-timepicker",s),r.closeOnWindowScroll&&e(document).on("scroll.ui-timepicker",s),n.trigger("showTimepicker"),this}},hide:function(i){var a=e(this),n=a.data("timepicker-settings")
return n&&n.useSelect&&a.blur(),e(".ui-timepicker-wrapper").each(function(){var i=e(this)
if(t(i)){var a=i.data("timepicker-input"),n=a.data("timepicker-settings")
n&&n.selectOnBlur&&g(a),i.hide(),a.trigger("hideTimepicker")}}),this},option:function(t,n){return"string"==typeof t&&void 0===n?e(this).data("timepicker-settings")[t]:this.each(function(){var r=e(this),s=r.data("timepicker-settings"),l=r.data("timepicker-list")
"object"==typeof t?s=e.extend(s,t):"string"==typeof t&&(s[t]=n),s=i(s),r.data("timepicker-settings",s),c.call(r.get(0),{type:"change"},"initial"),l&&(l.remove(),r.data("timepicker-list",!1)),s.useSelect&&a(r)})},getSecondsFromMidnight:function(){return k(m(this))},getTime:function(e){var t=this,i=m(t)
if(!i)return null
var a=k(i)
if(null===a)return null
e||(e=new Date)
var n=new Date(e)
return n.setHours(a/3600),n.setMinutes(a%3600/60),n.setSeconds(a%60),n.setMilliseconds(0),n},isVisible:function(){var e=this,i=e.data("timepicker-list")
return!(!i||!t(i))},setTime:function(e){var t=this,i=t.data("timepicker-settings")
if(i.forceRoundTime)var a=r(k(e),i)
else var a=b(k(e),i)
return e&&null===a&&i.noneOption&&(a=e),u(t,a,"initial"),c.call(t.get(0),{type:"change"},"initial"),t.data("timepicker-list")&&d(t,t.data("timepicker-list")),this},remove:function(){var e=this
if(e.hasClass("ui-timepicker-input")){var t=e.data("timepicker-settings")
return e.removeAttr("autocomplete","off"),e.removeClass("ui-timepicker-input"),e.removeData("timepicker-settings"),e.off(".timepicker"),e.data("timepicker-list")&&e.data("timepicker-list").remove(),t.useSelect&&e.show(),e.removeData("timepicker-list"),this}}}
e.fn.timepicker=function(t){return this.length?x[t]?this.hasClass("ui-timepicker-input")?x[t].apply(this,Array.prototype.slice.call(arguments,1)):this:"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.timepicker"):x.init.apply(this,arguments):this}})
var r={settings:{Roster:{},Company:{name:"",slogan:"",logo:""},Team:{members:[]},Templates:[{avatar:!0,title:!0,hours:!1,defaultWorkingHours:8}]},ui:{snackbar:$(".mdl-snackbar"),menu:$("#menu"),menuItem:'<a class="mdl-navigation__link mdl-tabs__tab" href="#"></a>',page:$("#page"),pageTab:'<section class="mdl-tabs__panel" id=""><div class="page-content"></div></section>',loadingSpinner:'<div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active"></div>',input:function(e){var t=e.data("input")||"",i=e.data("type")||"text",a=e.data("class")||"",n=e.data("value")||"",r=e.data("min")||"",s=e.data("max")||"",l=e.data("step")||1,o=e.data("required")?"required":"",d=e.data("checked")?"checked":""
switch(i){case"checkbox":return'<label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="'+encodeURIComponent(t).replace(/%20/g,"_")+'"><input class="mdl-switch__input '+a+'"'+d+' type="'+i+'" value="'+n+'" id="'+encodeURIComponent(t).replace(/%20/g,"_")+'"><span class="mdl-switch__label">'+String(t)+"</span></label>"
case"number":return'<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><input class="mdl-textfield__input '+a+'" '+o+' min="'+r+'" max="'+s+'" type="'+i+'" value="'+n+'" id="'+encodeURIComponent(t).replace(/%20/g,"_")+'"><label class="mdl-textfield__label" for="'+encodeURIComponent(t).replace(/%20/g,"_")+'">'+String(t)+"</label></div>"
case"range":return'<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label" for="'+encodeURIComponent(t).replace(/%20/g,"_")+'">'+String(t)+'</label><input class="mdl-textfield__input '+a+'" '+o+' min="'+r+'" max="'+s+'" type="number" value="'+n+'" id="'+encodeURIComponent(t).replace(/%20/g,"_")+'"><input class="mdl-slider mdl-js-slider '+a+'" '+o+' min="'+r+'" max="'+s+'" step="'+l+'" type="'+i+'" value="'+n+'" id="'+encodeURIComponent(t).replace(/%20/g,"_")+'"></div>'
default:return'<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><input class="mdl-textfield__input '+a+'" '+o+' type="'+i+'" value="'+n+'" id="'+encodeURIComponent(t).replace(/%20/g,"_")+'"><label class="mdl-textfield__label" for="'+encodeURIComponent(t).replace(/%20/g,"_")+'">'+String(t)+"</label></div>"}},updateTitle:function(e){return titleEnd="Roster"!=e?" - Roster":"",$("title").text(e+titleEnd)},teamMemberCard:function(e,t,i,a,n){return""!=n&&a.match(/#[0-9a-f]{6}/g)?cardDetail='style="color:'+n+';background:none;"':cardDetail='style="color:#ffffff"',$('<div class="team-member mdl-card mdl-shadow--2dp" id="'+e+'"><div class="mdl-card__menu"><button class="edit mdl-button mdl-button--icon mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--primary"><i class="material-icons">edit</i></button><button class="remove save-data mdl-button mdl-button--icon mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"><i class="material-icons">delete</i></button></div><div class="mdl-card__title mdl-card--expand"></div><div class="mdl-card__actions details" '+cardDetail+'><span class="card-name">'+t+'</span><span class="card-title">'+i+"</span></div></div>").css("background","center/cover "+a)},editTeamMember:function(e){var t=this.newTeamMemberCard(),i=r.helper.find(e,"id",r.settings.Team.members)
if(i){var a=i
$(t).attr("id",a.id),$(t).find("#Name").parent()[0].MaterialTextfield.change(a.name),$(t).find("#Title").parent()[0].MaterialTextfield.change(a.title),$(t).find("#Email").parent()[0].MaterialTextfield.change(a.email),0===a.bg.indexOf("url(")&&$(t).find(".upload").css("background-image",a.bg).text("")}else $("#Team #add-card").prop("disabled",!1),$(".adding").remove(),r.helper.toast("Selected member not found :(")
return t},newTeamMemberCard:function(){$("#Team #add-card").prop("disabled",!0)
var e=$('<div class="team-member adding mdl-card mdl-shadow--2dp"><div class="mdl-card__actions details"><div class="card-name" data-input="Name" required="true"></div><div class="card-title" data-input="Title" required="true"></div><div class="card-email" data-input="Email" data-type="email"></div><div class="bottom"><input type="file" hidden /><button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect upload"><img src="" hidden>Photo</button><div class="mdl-layout-spacer"></div><button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect save-data mdl-button--accent" disabled>Save</button></div></div></div>')
return $("body").append(e),$("*[data-input]",e).each(function(e,t){$(t).html(r.ui.input($(t))),window.componentHandler.upgradeDom()}),$(".mdl-js-textfield",e).on("change keyup",function(){0===$(".is-invalid",e).length&&$("[required=true] .is-dirty",e).length===$("[required=true] .mdl-js-textfield",e).length?$(".save-data",e).prop("disabled",!1):$(".save-data",e).prop("disabled",!0)}),$("input:first",e).focus(),e},rosterGrid:function(e){var t='<div class="mdl-grid roster-header mdl-grid--no-spacing">'
t+='<div class="mdl-cell">Team Member</div>'
var i="",a=r.helper.week
for(var n in a)"Saturday"===a[n]||"Sunday"===a[n]?i+='<div class="mdl-cell weekend">'+a[n]+"</div>":i+='<div class="mdl-cell">'+a[n]+"</div>"
t+=i+"</div>"
for(var s in e){var l=e[s],o=""
$(i).each(function(){var e="",t=""
r.settings.Roster[l.id]&&(e=r.settings.Roster[l.id][$(this).text()].start,t=r.settings.Roster[l.id][$(this).text()].finish)
$(this).html('<span class="ready-time">'+function(){return e&&t?e.length>0&&t.length>0?e+" &mdash; "+t:(e+" "+t).trim():""}()+'</span><div data-class="time start" data-input="Start" data-value="'+e+'"></div><div data-class="time end" data-input="Finish" data-value="'+t+'"></div><button class="copy-time mdl-button mdl-js-button mdl-js-ripple-effect" tabindex="-1"><i class="material-icons">content_copy</i> Copy</button><button class="paste-time mdl-button mdl-js-button mdl-js-ripple-effect" tabindex="-1"><i class="material-icons">clear</i> Clear</button><button class="done-time mdl-button mdl-js-button mdl-js-ripple-effect" tabindex="-1"><i class="material-icons">check_circle</i> Done</button>'),o+=this.outerHTML})
var d=$('<div class="mdl-grid roster-body mdl-grid--no-spacing" id="'+l.id+'"><div class="mdl-cell team-member"><div class="mdl-card__actions details"><span class="card-name">'+l.name+"</span></div></div>"+o+"</div>")
if(r.settings.Templates[0].title&&$(".team-member .details",d).append('<span class="card-title">'+l.title+"</span>"),r.settings.Templates[0].hours&&$(".team-member .details",d).append('<span class="hours" hidden></span>'),r.settings.Templates[0].avatar)if(l.bg.match(/(#......)/)){var c=document.createElement("canvas"),m=c.getContext("2d")
c.width=1,c.height=1,m.fillStyle=l.bg,m.fillRect(0,0,c.width,c.height),colourImage=c.toDataURL(),$(".team-member",d).prepend('<div class="avatar"><img src="'+colourImage+'"></div>')}else $(".team-member",d).prepend('<div class="avatar"><img src="'+l.bg.split('url("')[1].split('")')[0]+'"></div>')
t+=d[0].outerHTML}return t},rosterHeader:function(e){return'<div class="company"><h3>'+e.name+"</h3><h4>"+e.slogan+'</h4></div><div class="mdl-layout-spacer"></div><div class="logo"><img class="mdl-logo" src="'+e.logo+'" height="100"></div>'},templateCard:function(e){return'<div class="template mdl-card mdl-shadow--2dp"><div class="mdl-card__actions details"><div class="card-avatar" data-input="Avatar" data-type="checkbox" data-checked="'+e.avatar+'"></div><div class="card-title" data-input="Title" data-type="checkbox" data-checked="'+e.title+'"></div><div class="card-hours" data-input="Hours" data-type="checkbox" data-checked="'+e.hours+'"></div><div class="card-working-hours" data-type="range" data-min="1" data-max="12" required="true" data-input="Default Working Hours" data-value="'+e.defaultWorkingHours+'"></div><div class="mdl-layout-spacer"></div><div class="bottom"><button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect save-data mdl-button--accent" disabled>Save & Activate</button></div></div></div>'},newTemplateCard:'<div class="template adding mdl-card mdl-shadow--2dp"><div class="mdl-card__actions details"><div class="card-avatar" data-input="Avatar" data-type="checkbox"></div><div class="card-title" data-input="Title" data-type="checkbox"></div><div class="card-hours" data-input="Hours" data-type="checkbox"></div><div class="mdl-layout-spacer"></div><div class="bottom"><button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect save-data mdl-button--accent" disabled>Save</button></div></div></div>'},o:function(e){return Object.keys(e)},helper:{week:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],addMember:function(e,t,i,a,n){var n=n||void 0
if(n){var s=r.settings.Team.members.indexOf(r.helper.find(n,"id",r.settings.Team.members))
this.remove(s,r.settings.Team.members)}else n=Date.now()
var l="#ffffff"
if("none"===a){var o=r.helper.randomPalette()
a=o.colour,l=o.text}r.settings.Team.members.push({id:n,name:e,title:i,email:t,bg:a||"",text:l||""})},editMember:function(e,t,i,a,n){this.addMember(t,i,a,n,e)},remove:function(e,t){t.splice(e,1)},find:function(e,t,i){return i.find(function(i){return i[t]==e})},setCopyTime:function(e){$(".master-copy-time").removeClass("master-copy-time"),$(e).parent(".mdl-cell").addClass("master-copy-time")},getCopyTime:function(e){var t=[]
return $("input.time",e).each(function(){t.push($(this).val())}),t},toast:function(e){r.ui.snackbar[0].MaterialSnackbar.showSnackbar({message:e})},set:function(e,t){localStorage.setItem(e,JSON.stringify(t))},get:function(e){var t=localStorage.getItem(e)
return void 0===t?void r.helper.toast(e+" not found"):JSON.parse(t)},randomPalette:function(){var e=r.ui.palette,t=Object.keys(e)[Math.floor(Math.random()*Object.keys(e).length)],i=Object.keys(e[t])[Math.floor(Math.random()*Object.keys(e[t]).length)]
return e[t][i]}}}
$.getJSON("js/mdlPalette.json").done(function(e){r.ui.palette=e}),r.helper.get("settings")&&$.extend(!0,r.settings,r.helper.get("settings"))
for(var i=0;i<r.o(r.settings).length;i++)r.ui.menu.append($(r.ui.menuItem).text(r.o(r.settings)[i]).attr("href","#"+r.o(r.settings)[i])),r.ui.page.append($(r.ui.pageTab).attr("id",r.o(r.settings)[i]))
0===window.location.hash.length&&(window.location.hash="Roster"),$("a",r.ui.menu).click(function(){var e=$(this),t=e.attr("href").split("#")[1]
e.attr("href")!=window.location.hash&&(window.location.hash=t)}),$(window).on("load hashchange",function(){var e=window.location.hash
r.ui.updateTitle(e.split("#")[1]),$("> a",r.ui.menu).removeClass("is-active"),$('> a[href="'+e+'"]',r.ui.menu).addClass("is-active"),$("> section",r.ui.page).removeClass("is-active"),$("> section"+e,r.ui.page).addClass("is-active").find(".page-content").append(r.ui.loadingSpinner).load("pages/"+e.split("#")[1]+".html"),window.componentHandler.upgradeDom()}),$("body").on("click",".save-data",function(){var e=$(this),t=e.parents("section")
$("input,textarea,select",t).off("change keydown"),e.prop("disabled",!0),"Roster"===$(t).attr("id")&&$(".roster-body").each(function(){var e=$(this).attr("id")
r.settings.Roster[e]={},$(".mdl-cell:not(.team-member)",$(this)).each(function(t){var i=$(".roster-header .mdl-cell").eq(t+1).text()
r.settings.Roster[e][i]={start:$("input[type=text]:eq(0)",$(this)).val(),finish:$("input[type=text]:eq(1)",$(this)).val()}})}),"Company"===$(t).attr("id")&&(r.settings.Company.name=$("#Company_Name").val(),r.settings.Company.slogan=$("#Company_Slogan").val(),r.settings.Company.logo=$("#Company_Logo").attr("src")),"Team"===$(t).attr("id")&&(1===$(".team-member.adding:not([id])").length&&r.helper.addMember($(".team-member.adding #Name").val(),$(".team-member.adding #Email").val(),$(".team-member.adding #Title").val(),$(".team-member.adding .upload").css("background-image")),1===$(".team-member.adding[id]").length&&r.helper.editMember($(".team-member.adding").attr("id"),$(".team-member.adding #Name").val(),$(".team-member.adding #Email").val(),$(".team-member.adding #Title").val(),$(".team-member.adding .upload").css("background-image"))),"Templates"===$(t).attr("id")&&(r.settings.Templates=[{avatar:$("#Templates .template .card-avatar input[type=checkbox]").prop("checked"),title:$("#Templates .template .card-title input[type=checkbox]").prop("checked"),hours:$("#Templates .template .card-hours input[type=checkbox]").prop("checked"),defaultWorkingHours:$("#Templates .template .card-working-hours input").val()}]),r.helper.set("settings",r.settings),r.helper.toast("Saved "+$(t).attr("id")+" details"),$("input,textarea,select",t).on("change keydown",function(){e.prop("disabled",!1)}),$("section.is-active").find(".page-content").html("").append(r.ui.loadingSpinner).load("pages/"+$("section.is-active").attr("id")+".html")}),$("body").on("click","button.upload",function(){var e=$(this),t=e.siblings("input[type=file]")
t[0].click(),t.off().on("change",function(){var t=new FileReader
t.onload=function(t){"Company"===e.parents("section").attr("id")?e.prev("#Company_Logo").attr("src",t.target.result).removeProp("hidden"):"Team"===e.parents("section").attr("id")&&e.text("").css("background-image","url("+t.target.result+")")},t.readAsDataURL(this.files[0])})}),$(document).ajaxComplete(function(){$("*[data-input]").each(function(e,t){$(t).parents(".roster").length?$(t).replaceWith(r.ui.input($(t))):$(t).html(r.ui.input($(t))),$(t).data("value")&&$("input",$(t)).val($(t).data("value"))})
new Event("mdl-done")
$("body").trigger("mdl-done"),window.componentHandler.upgradeDom()})
