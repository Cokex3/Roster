define(["../core","../core/stripAndCollapse","./support","../core/nodeName","../core/init"],function(e,t,n,i){"use strict";var r=/\r/g;e.fn.extend({val:function(t){var n,i,s,o=this[0];{if(arguments.length)return s=e.isFunction(t),this.each(function(i){var r;1===this.nodeType&&(r=s?t.call(this,i,e(this).val()):t,null==r?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=e.map(r,function(e){return null==e?"":e+""})),n=e.valHooks[this.type]||e.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&void 0!==n.set(this,r,"value")||(this.value=r))});if(o)return n=e.valHooks[o.type]||e.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&void 0!==(i=n.get(o,"value"))?i:(i=o.value,"string"==typeof i?i.replace(r,""):null==i?"":i)}}}),e.extend({valHooks:{option:{get:function(n){var i=e.find.attr(n,"value");return null!=i?i:t(e.text(n))}},select:{get:function(t){var n,r,s,o=t.options,a=t.selectedIndex,l="select-one"===t.type,u=l?null:[],c=l?a+1:o.length;for(s=0>a?c:l?a:0;c>s;s++)if(r=o[s],(r.selected||s===a)&&!r.disabled&&(!r.parentNode.disabled||!i(r.parentNode,"optgroup"))){if(n=e(r).val(),l)return n;u.push(n)}return u},set:function(t,n){for(var i,r,s=t.options,o=e.makeArray(n),a=s.length;a--;)r=s[a],(r.selected=e.inArray(e.valHooks.option.get(r),o)>-1)&&(i=!0);return i||(t.selectedIndex=-1),o}}}}),e.each(["radio","checkbox"],function(){e.valHooks[this]={set:function(t,n){return Array.isArray(n)?t.checked=e.inArray(e(t).val(),n)>-1:void 0}},n.checkOn||(e.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})});