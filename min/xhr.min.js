define(["../core","../var/support","../ajax"],function(e,t){"use strict";e.ajaxSettings.xhr=function(){try{return new window.XMLHttpRequest}catch(e){}};var n={0:200,1223:204},i=e.ajaxSettings.xhr();t.cors=!!i&&"withCredentials"in i,t.ajax=i=!!i,e.ajaxTransport(function(e){var r,s;return t.cors||i&&!e.crossDomain?{send:function(t,i){var o,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest");for(o in t)a.setRequestHeader(o,t[o]);r=function(e){return function(){r&&(r=s=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?i(0,"error"):i(a.status,a.statusText):i(n[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=r(),s=a.onerror=r("error"),void 0!==a.onabort?a.onabort=s:a.onreadystatechange=function(){4===a.readyState&&window.setTimeout(function(){r&&s()})},r=r("abort");try{a.send(e.hasContent&&e.data||null)}catch(l){if(r)throw l}},abort:function(){r&&r()}}:void 0})});